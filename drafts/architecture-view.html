<!doctype html>
<html class="no-js" lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>kamidox.com</title>
		<meta name="description" content="">
		<meta name="author" content="Joey Huang">

		<link rel="stylesheet" href="../theme/css/foundation.css" />
		<link rel="stylesheet" href="../theme/css/pygment/monokai.css" />
		<link rel="stylesheet" href="../theme/css/custom.css" />


		<link rel="shortcut icon" href="../theme/img/favicon.ico">

		<script src="../theme/js/modernizr.js"></script>

		<!-- Feeds -->


		<!-- mathjax config similar to math.stackexchange -->
		<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<script>
		MathJax.Hub.Config({
		  config: ["MMLorHTML.js"],
		  extensions: ["tex2jax.js"],
		  jax: ["input/TeX"],
		  tex2jax: {
		    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
		    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
		    processEscapes: false
		  },
		  TeX: {
		    extensions: ["AMSmath.js", "AMSsymbols.js"],
		    TagSide: "right",
		    TagIndent: ".8em",
		    MultLineWidth: "85%",
		    equationNumbers: {
		      autoNumber: "AMS",
		    },
		    unicode: {
		      fonts: "STIXGeneral,'Arial Unicode MS'"
		    }
		  },
		  showProcessingMessages: false
		});
		</script>
	</head>
	<body>
		<div class="off-canvas-wrap">
			<div class="inner-wrap">
				<!-- mobile top bar to activate nav -->
				<nav class="tab-bar show-for-small">
					<section class="left-small">
						<a class="left-off-canvas-toggle menu-icon" ><span></span></a>
					</section>

					<section class="middle tab-bar-section">
						<h1 class="title">kamidox.com</h1>
					</section>
				</nav>

				<!-- mobile side bar nav -->
				<aside class="left-off-canvas-menu">
					<ul class="off-canvas-list">
							<li><a href="http://blog.kamidox.com">Home</a></li>
							<li><a href="http://blog.kamidox.com/about.html">About</a></li>

						<li><label>Categories</label></li>
							<li ><a href="../category/android.html">android</a></li>
							<li ><a href="../category/essay.html">essay</a></li>
							<li ><a href="../category/flask.html">flask</a></li>
							<li ><a href="../category/ml.html">ml</a></li>
							<li ><a href="../category/nlp.html">nlp</a></li>
							<li ><a href="../category/python.html">python</a></li>
							<li ><a href="../category/tools.html">tools</a></li>
							<li ><a href="../category/weapp.html">weapp</a></li>
							<li ><a href="../category/web.html">web</a></li>
							<li ><a href="../category/werkzeug.html">werkzeug</a></li>




						<li><label>Monthly Archives</label></li>
									<li><a href="/posts/2018/03/index.html">March 2018 (1)</a></li>
									<li><a href="/posts/2017/05/index.html">May 2017 (2)</a></li>
									<li><a href="/posts/2017/04/index.html">April 2017 (1)</a></li>
									<li><a href="/posts/2017/02/index.html">February 2017 (1)</a></li>
									<li><a href="/posts/2017/01/index.html">January 2017 (1)</a></li>
									<li><a href="/posts/2016/12/index.html">December 2016 (2)</a></li>
									<li><a href="/posts/2016/11/index.html">November 2016 (3)</a></li>
									<li><a href="/posts/2016/10/index.html">October 2016 (1)</a></li>
									<li><a href="/posts/2016/09/index.html">September 2016 (1)</a></li>
									<li><a href="/posts/2016/03/index.html">March 2016 (2)</a></li>
									<li><a href="/posts/2016/02/index.html">February 2016 (2)</a></li>
									<li><a href="/posts/2016/01/index.html">January 2016 (2)</a></li>
									<li><a href="/posts/2015/12/index.html">December 2015 (10)</a></li>
									<li><a href="/posts/2015/11/index.html">November 2015 (6)</a></li>
									<li><a href="/posts/2015/10/index.html">October 2015 (2)</a></li>
									<li><a href="/posts/2015/09/index.html">September 2015 (7)</a></li>
									<li><a href="/posts/2015/08/index.html">August 2015 (1)</a></li>
									<li><a href="/posts/2015/07/index.html">July 2015 (1)</a></li>
									<li><a href="/posts/2015/05/index.html">May 2015 (1)</a></li>
									<li><a href="/posts/2015/04/index.html">April 2015 (1)</a></li>
									<li><a href="/posts/2015/03/index.html">March 2015 (3)</a></li>
									<li><a href="/posts/2015/02/index.html">February 2015 (2)</a></li>
									<li><a href="/posts/2015/01/index.html">January 2015 (2)</a></li>
									<li><a href="/posts/2014/12/index.html">December 2014 (3)</a></li>
									<li><a href="/posts/2014/11/index.html">November 2014 (4)</a></li>
									<li><a href="/posts/2014/10/index.html">October 2014 (6)</a></li>
									<li><a href="/posts/2014/09/index.html">September 2014 (1)</a></li>
									<li><a href="/posts/2014/07/index.html">July 2014 (1)</a></li>


					</ul>
				</aside>

				<!-- top bar nav -->
				<nav class="top-bar hide-for-small-only" data-topbar>
					<ul class="title-area">
						<li class="name">
							<h1><a href="../">kamidox.com</a></h1>
						</li>
					</ul>

					<section class="top-bar-section">
						<ul class="left">
								<li><a href="http://blog.kamidox.com">Home</a></li>
								<li><a href="http://blog.kamidox.com/about.html">About</a></li>

						</ul>
					</section>
				</nav>

				<!-- Main Page Content and Sidebar -->
				<section class="main-section">
					<div class="row">
						<!-- Main Content -->
						<div class="medium-9 small-12 columns" role="content">
<article>
	<h2>使用 4 + 1 视图模型来表达系统架构</h2>
	<h2 id="4-1">4 + 1 视图模型的简介</h2>
<p>4 + 1 视图模型是由 <a href="https://en.wikipedia.org/wiki/Philippe_Kruchten">Philippe Kruchten</a> 最先提出来的用来表达软件系统架构的一个方法。它用下面的四种视图来从不同的层面表达系统架构：</p>
<ul>
<li>逻辑视图（Logical View），设计的对象模型（使用面向对象的设计方法时）。</li>
<li>过程视图（Process View），捕捉设计的并发和同步特征。</li>
<li>物理视图（Physical View），描述了软件到硬件的映射，反映了分布式特性。</li>
<li>开发视图（Development View），描述了在开发环境中软件的静态组织结构。</li>
</ul>
<p><img alt="4 + 1 视图模型" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/4%2B1_Architectural_View_Model.jpg/320px-4%2B1_Architectural_View_Model.jpg" /></p>
<p>下面是几个有用的参考资料：</p>
<ul>
<li>wikipedia 上的一个<a href="https://en.wikipedia.org/wiki/4%2B1_architectural_view_model">简介</a></li>
<li>Philippe Kruchten 的<a href="http://www.cs.ubc.ca/~gregor/teaching/papers/4+1view-architecture.pdf">论文原文</a></li>
<li>IBM 网站上有这篇<a href="http://www.ibm.com/developerworks/cn/rational/r-4p1-view/index.html">论文的中文版</a></li>
<li>IBM 网站上还有一篇简单的使用这一思想进行架构设计的<a href="http://www.ibm.com/developerworks/cn/rational/06/r-wenyu/index.html">例子</a></li>
</ul>
<blockquote>
<p>并不是所有的软件架构都需要&rdquo;4＋1&rdquo;视图。无用的视图可以从架构描述中省略，比如： 只有一个处理器，则可以省略物理视图；而如果仅有一个进程或程序，则可以省略过程视图。 对于非常小型的系统，甚至可能逻辑视图与开发视图非常相似，而不需要分开的描述。场景对于所有的情况均适用。 &mdash; Philippe Kruchten</p>
</blockquote>
<p>针对不同规模，不同性质的软件，4 + 1 视图方法并不总是适用。核心问题是：<strong>把系统架构表达清楚</strong>。</p>
<h2 id="_1">逻辑视图</h2>
<p>c<br />
逻辑视图的核心目的，是通过理解需求来<strong>解构系统</strong>，即把系统分解为一个个模块，定义好每个模块的接口和交互方式。在系统设计层面，如果使用的是面向对象的设计方法，可以使用 UML 的对象模型（包图）来表达。如果使用最朴素的设计方法，就是把系统划分成一个个模块，并且表达好每个模块向外提供的功能接口，最终这些模块能支撑整个系统的需求。如果针对模块设计层面，一般还可以使用状态图来表达模块内部的细化的结构。</p>
<p>逻辑视图使用两个图例来表达：</p>
<ul>
<li>组件：系统划分为哪几个组件？这些组件可以是类，类集合，甚至是子模块。</li>
<li>组件间的关系：总共有五种关系<ul>
<li>Association: 协作。即组件之间处于同一个层级，通过协同工作来对外提供功能。组件间用直线来表示。</li>
<li>Containment: 包含。即一个组件包含另外一个组件。用一头带实心圆的直线来表示，其中实心圆指向容器方。</li>
<li>Usage: 使用。即一个组件使用另外一个组件作为其下一层，以便提供它的功能。使用空心圆的直线来表示，其中空心圆指向使用方。</li>
<li>Inheritance: 继承。即一个组件是另外一个组件的子类。使用带方向箭头的实线表示，箭头指向父类。</li>
<li>Instanciation: 实例化。即一个组件是另外一个组件的实例。使用带方向箭头虚线表示，箭头指向被实例化的组件。</li>
</ul>
</li>
</ul>
<p><img alt="逻辑视图的表现形式" src="../../images/arch_view_logical_component.png" /></p>
<h3 id="_2">类之间的关系</h3>
<p><a href="http://www.cnblogs.com/liuling/archive/2013/05/03/classrelation.html">http://www.cnblogs.com/liuling/archive/2013/05/03/classrelation.html</a> 这是一篇很简洁的描述类之间关系的文章。</p>
<p>下面我们使用 Java 代码来举例演示类之间的关系。</p>
<p><strong>继承和实现 Inheritance/Extension</strong></p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008800; font-style: italic">// 继承</span>
<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">ClassA</span> <span style="color: #666666">{</span>

<span style="color: #666666">}</span>

<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">ClassB</span> <span style="color: #AA22FF; font-weight: bold">extends</span> ClassA <span style="color: #666666">{</span>

<span style="color: #666666">}</span>

<span style="color: #008800; font-style: italic">// 实现</span>
<span style="color: #AA22FF; font-weight: bold">interface</span> <span style="color: #0000FF">InterfaceA</span> <span style="color: #666666">{</span>
    <span style="color: #AA22FF; font-weight: bold">public</span> <span style="color: #00BB00; font-weight: bold">void</span> <span style="color: #00A000">methodA</span><span style="color: #666666">();</span>
<span style="color: #666666">}</span>

<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">ClassIA</span> <span style="color: #AA22FF; font-weight: bold">implements</span> InterfaceA <span style="color: #666666">{</span>
    <span style="color: #AA22FF; font-weight: bold">public</span> <span style="color: #00BB00; font-weight: bold">void</span> <span style="color: #00A000">methodA</span><span style="color: #666666">()</span> <span style="color: #666666">{}</span>
<span style="color: #666666">}</span>
</pre></div>


<p><strong>依赖关系 Dependence</strong></p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">ClassB</span> <span style="color: #666666">{</span>

<span style="color: #666666">}</span>

<span style="color: #008800; font-style: italic">// ClassA 依赖 ClassB，偶然性，临时性的弱依赖。ClassB 作为 ClassA 的一个方法的参数。</span>
<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">ClassA</span> <span style="color: #666666">{</span>
    <span style="color: #AA22FF; font-weight: bold">public</span> <span style="color: #00BB00; font-weight: bold">void</span> <span style="color: #00A000">methodA</span><span style="color: #666666">(</span>ClassB b<span style="color: #666666">){</span>

    <span style="color: #666666">}</span>
<span style="color: #666666">}</span>
</pre></div>


<p><strong>关联关系 </strong></p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">ClassB</span> <span style="color: #666666">{</span>

<span style="color: #666666">}</span>

<span style="color: #008800; font-style: italic">/*</span>
<span style="color: #008800; font-style: italic"> * 关联关系：ClassA 与 ClassB 关联，这是确定性的强依赖</span>
<span style="color: #008800; font-style: italic"> */</span>
<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">ClassA</span> <span style="color: #666666">{</span>
    <span style="color: #AA22FF; font-weight: bold">private</span> ClassB mB<span style="color: #666666">;</span>
<span style="color: #666666">}</span>
</pre></div>


<p>关联关系包含两个层次更深的特例，聚合和组合。</p>
<ul>
<li>聚合 Aggregation<br />
  ClassA <strong>HAS</strong> ClassB，表达的是整体和局部的关系。在聚合关系里，整体和局部是可分离的。比如一个 App 使用 MVC 模型来设计，此时界面部分 View 和 模型部分 Model 是聚合的关系。他们有各自的生命周期，是可分离的，Model 可以独立于 View 存在，用来实现后台数据更新等功能。</li>
<li>组合 Composition<br />
  ClassA <strong>CONTAINS</strong> ClassB，表达的也是整体和局部的关系，但这时两者是不可分离的，部分的生命周期与整体的生命周期相同。比如一个负责从服务器获取最新数据的网络组件和 Socket 组件就是组合的关系。在这个组合关系里，如果网络组件销毁了，它所拥有的 Socket 组件也同时销毁。</li>
</ul>
<h3 id="_3">示例</h3>
<p>我们以一个 App 通过远程服务器控制家里的摄像头为例，来说明逻辑视图如何从功能角度来描述系统架构，以及模块划分。</p>
<p><img alt="逻辑视图" src="../../images/arch_view_remote_ctrl_camera.png" /></p>
<p>逻辑视图在软件总体设计里体现的意义不大，因为总体设计不会涉及模块内部的细节。逻辑视图在模块详细设计里的意义比较大，可能比较清楚地表达出模块内部的详细结构，即模块内部的子模块及关键方法和属性的表达。</p>
<h2 id="_4">过程视图</h2>
<p>过程视图考虑一些非功能性的需求，如性能和可用性。它解决并发性、分布性、系统完整性、容错性的问题，以及逻辑视图的主要抽象如何与进程结构相配合在一起。</p>
<p>进程架构可以在几种层次的抽象上进行描述，每个层次针对不同的问题。在最高的层次上，进程架构可以视为一组独立执行的通信程序。</p>
<p><img alt="过程视图的表现形式" src="../../images/arch_view_process_component.png" /></p>
<p>过程视图的通信</p>
<ul>
<li>消息</li>
<li>RPC 远程调用</li>
<li>双向消息</li>
<li>事件广播</li>
</ul>
<h3 id="_5">示例</h3>
<p><img alt="过程视图" src="../../images/arch_view_process_view.png" /></p>
<h2 id="_6">开发视图</h2>
<p>开发架构关注软件开发环境下实际模块的组织。软件打包成小的程序块（程序库或子系统），它们可以由一位或几位开发人员来开发。子系统可以组织成分层结构，每个层为上一层提供良好定义的接口。</p>
<h2 id="_7">物理视图</h2>
<p>物理视图表达的是软件至硬件的映射，即系统的硬件拓扑结构。特别是对服务器类项目，需要描述可用性、可靠性（容错性），性能（吞吐量）和可伸缩性。</p>
	<hr/>
	<h6>Post by <a href="../author/joey-huang.html">Joey Huang</a> under <a href="../category/notes.html">notes</a> on 2015-12-24(Thursday) 15:36.</h6>
</article>

<hr/>
<div class="row">
	<div class="small-12 columns">
		<h3>Comments</h3>
		<div id="disqus_thread"></div>
		<script type="text/javascript">
			var disqus_shortname = 'kamidox';
			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	</div>
</div>
						</div>
						<!-- End Main Content -->
						<!-- Sidebar -->
						<aside class="medium-3 hide-for-small-only columns">
							<div class="panel">
								<h5>Places</h5>
								<ul class="side-nav">
										<li><a href="http://blog.kamidox.com/feeds/rss.xml" rel="alternate">RSS Feed</a></li>

								</ul>
							</div>


							<div class="panel">
								<h5>Categories</h5>
								<ul class="side-nav">
										<li><a href="../category/android.html">android</a></li>
										<li><a href="../category/essay.html">essay</a></li>
										<li><a href="../category/flask.html">flask</a></li>
										<li><a href="../category/ml.html">ml</a></li>
										<li><a href="../category/nlp.html">nlp</a></li>
										<li><a href="../category/python.html">python</a></li>
										<li><a href="../category/tools.html">tools</a></li>
										<li><a href="../category/weapp.html">weapp</a></li>
										<li><a href="../category/web.html">web</a></li>
										<li><a href="../category/werkzeug.html">werkzeug</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Tags</h5>
								<ul class="tag-cloud">
										<li class="tag-3"><a href="../tag/web.html">web</a></li>
										<li class="tag-4"><a href="../tag/ebook.html">ebook</a></li>
										<li class="tag-4"><a href="../tag/miui.html">miui</a></li>
										<li class="tag-3"><a href="../tag/pelican.html">pelican</a></li>
										<li class="tag-3"><a href="../tag/sublime.html">sublime</a></li>
										<li class="tag-4"><a href="../tag/patchrom.html">patchrom</a></li>
										<li class="tag-2"><a href="../tag/flask.html">flask</a></li>
										<li class="tag-4"><a href="../tag/github.html">github</a></li>
										<li class="tag-1"><a href="../tag/python.html">python</a></li>
										<li class="tag-4"><a href="../tag/socketserver.html">SocketServer</a></li>
										<li class="tag-2"><a href="../tag/android.html">android</a></li>
										<li class="tag-2"><a href="../tag/tools.html">tools</a></li>
										<li class="tag-4"><a href="../tag/nlp.html">nlp</a></li>
										<li class="tag-1"><a href="../tag/machine-learning.html">machine-learning</a></li>
										<li class="tag-4"><a href="../tag/contacts.html">contacts</a></li>
										<li class="tag-4"><a href="../tag/contacts-provider.html">contacts provider</a></li>
										<li class="tag-2"><a href="../tag/weapp.html">weapp</a></li>
										<li class="tag-4"><a href="../tag/decorator.html">decorator</a></li>
										<li class="tag-4"><a href="../tag/react.html">react</a></li>
										<li class="tag-2"><a href="../tag/markdown.html">markdown</a></li>
										<li class="tag-1"><a href="../tag/thought.html">thought</a></li>
										<li class="tag-4"><a href="../tag/wekzeug.html">wekzeug</a></li>
										<li class="tag-4"><a href="../tag/uml.html">uml</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Monthly Archives</h5>
								<ul class="side-nav">
											<li><a href="/posts/2018/03/index.html">March 2018 (1)</a></li>
											<li><a href="/posts/2017/05/index.html">May 2017 (2)</a></li>
											<li><a href="/posts/2017/04/index.html">April 2017 (1)</a></li>
											<li><a href="/posts/2017/02/index.html">February 2017 (1)</a></li>
											<li><a href="/posts/2017/01/index.html">January 2017 (1)</a></li>
											<li><a href="/posts/2016/12/index.html">December 2016 (2)</a></li>
											<li><a href="/posts/2016/11/index.html">November 2016 (3)</a></li>
											<li><a href="/posts/2016/10/index.html">October 2016 (1)</a></li>
											<li><a href="/posts/2016/09/index.html">September 2016 (1)</a></li>
											<li><a href="/posts/2016/03/index.html">March 2016 (2)</a></li>
											<li><a href="/posts/2016/02/index.html">February 2016 (2)</a></li>
											<li><a href="/posts/2016/01/index.html">January 2016 (2)</a></li>
											<li><a href="/posts/2015/12/index.html">December 2015 (10)</a></li>
											<li><a href="/posts/2015/11/index.html">November 2015 (6)</a></li>
											<li><a href="/posts/2015/10/index.html">October 2015 (2)</a></li>
											<li><a href="/posts/2015/09/index.html">September 2015 (7)</a></li>
											<li><a href="/posts/2015/08/index.html">August 2015 (1)</a></li>
											<li><a href="/posts/2015/07/index.html">July 2015 (1)</a></li>
											<li><a href="/posts/2015/05/index.html">May 2015 (1)</a></li>
											<li><a href="/posts/2015/04/index.html">April 2015 (1)</a></li>
											<li><a href="/posts/2015/03/index.html">March 2015 (3)</a></li>
											<li><a href="/posts/2015/02/index.html">February 2015 (2)</a></li>
											<li><a href="/posts/2015/01/index.html">January 2015 (2)</a></li>
											<li><a href="/posts/2014/12/index.html">December 2014 (3)</a></li>
											<li><a href="/posts/2014/11/index.html">November 2014 (4)</a></li>
											<li><a href="/posts/2014/10/index.html">October 2014 (6)</a></li>
											<li><a href="/posts/2014/09/index.html">September 2014 (1)</a></li>
											<li><a href="/posts/2014/07/index.html">July 2014 (1)</a></li>
								</ul>
							</div>

						</aside>
						<!-- End Sidebar -->
					</div>

					<!-- Footer -->
					<footer class="row">
						<div class="medium-9 small-12">
							<hr/>
							<p class="text-center">Powered by <a href="http://getpelican.com">Pelican</a> and <a href="http://foundation.zurb.com/">Zurb Foundation</a>. Theme by <a href="http://hamaluik.com">Kenton Hamaluik</a>.
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253471695'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1253471695%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
							</p>
						</div>
					</footer>
					<!-- End Footer -->
				</section>
				<a class="exit-off-canvas"></a>
			</div><!--off-canvas inner-->
		</div><!--off-canvas wrap-->

		<script src="../theme/js/jquery.js"></script>
		<script src="../theme/js/foundation.min.js"></script>
		<script>
			$(document).foundation();
		</script>
	</body>
</html>